<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assets Library</title>
  <link rel="stylesheet" href="../main.css" />
   <script src="../transition.js" type="text/javascript"></script>
  <link rel="icon" href="https://ryryfn.com/ryryprofile.jpg">
</head>
<body>
  <div id="main">
    <div class="banner" style="background-size: cover; background-repeat: no-repeat; width: 100%; height: 250px; background-image: url(&quot;filterImages/slurpy.png&quot;);"></div>
<div class="banner2" style="background-size: contain; background-repeat: no-repeat; background-position:center; width: 900px; height: 250px; background-image: url('websiteLogo.png'); position: absolute; top:8px"></div>
    <ul class="menu">
      <li><a href="/">Home</a></li>
      <li><a href="../request">Request</a></li>
	  <li><a href="../assets" class="active"><span>Assets</span></a></li>
      <li><a href="../upload"><span>Upload Asset</span></a></li>
     <li><a href="../dashboard"><span>Dashboard</span></a></li>
    </ul>
    <h1>Assets Library</h1>
    <div class="message" style="margin-bottom:20px;">No need for filters as this update uses the most powerful search algorithm yet.</div>
   <form id="search-form" onsubmit="return false;">
  <input type="text" id="search-input" name="query" placeholder="Search assets..." autocomplete="off" style="width:830px;padding:10px; font-size:15px">
</form>

<script>
  const searchInput = document.getElementById('search-input');
  let debounceTimer;

  searchInput.addEventListener('input', () => {
    clearTimeout(debounceTimer);

    debounceTimer = setTimeout(() => {
      const query = searchInput.value.trim();
      if (query.length > 0) {
        // Redirect to search results page with query
        window.location.href = `/search/${query}`;
      }
    }, 1000); // 500ms debounce
  });
</script>


    <div class="asset-grid" id="asset-grid">
    <% assets.forEach(asset => { %>
  <a class="asset-card" target="_blank" href="../preview/<%= asset.id %>">
    <% if (asset.rank) { %>
      <div class="rank-badge">#<%= asset.rank %> Most Downloaded</div>
    <% } %>
    <img class="asset-img" src="https://ryryfn.com/<%= asset.img %>" alt="<%= asset.name %>">
    <span class="asset-name"><%= asset.name %></span>
    <span class="asset-category"><strong>Description:</strong> <%= asset.category ||  "No description." %></span>
    <span class="asset-category"><strong>Uploaded by:</strong> <%= asset.upload_user || "N/A" %></span>
    <span class="asset-category"><strong>Credits:</strong> <%= asset.credits || "Unspecified" %></span>
  </a>
<% }) %>


    </div>
  </div>
</body>
</html>
